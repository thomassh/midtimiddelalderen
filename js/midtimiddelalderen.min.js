var overlay,map;function initMap(){var center,options={center:{lat:59.9042,lng:10.763091},zoom:17,mapTypeId:"satellite",tilt:0,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},mapTypeControl:!1,fullscreenControl:!0,gestureHandling:"greedy"};map=new google.maps.Map(document.getElementById("map"),options);var bounds=new google.maps.LatLngBounds(new google.maps.LatLng(59.902595,10.76092),new google.maps.LatLng(59.90724,10.76985)),srcImage;overlay=new MimOverlay(bounds,"../img/mimkart2.svg",map);var icons={marker3d:"3d-punkt.svg",marker360:"3d-punkt.svg",markerFilm:"film-punkt.svg",markerSpill:"spill-punkt.svg"},features=[{lat:59.90345,lng:10.76146,type:"marker360",data:{id:"7P2V5",title:"Inne i Mariakirken"}},{lat:59.90362,lng:10.76216,type:"marker3d",data:{id:"cb86c7b100834cfcbeef0d151ef619a6",title:"Mariakirken"}},{lat:59.90577,lng:10.762086,type:"marker3d",data:{id:"429605d3354343e391bc11aac896c589",title:"Sjøboder og brygge"}},{lat:59.904232,lng:10.761228,type:"marker3d",data:{id:"a4eb2e9ab5754fc3a4e4cf9fd63edf40",title:"Middelalderbåt"}}],templates={marker3d:function(data){return`<div id="iw-container"><div class="iw-content"><div class="sketchfab-embed-wrapper"><iframe width="380" height="280" \n      src="https://sketchfab.com/models/${data.id}/embed?annotation_cycle=8" frameborder="0" \n      allowvr allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" \n      onmousewheel=""></iframe></div><div class="iw-title"><p>${data.title}</p></div></div>`},marker360:function(data){return`<div id="iw-container"><div class="iw-content"><iframe width="380" height="280"\n      style="width: 380px; height: 280px; border: none;" frameborder="0" allow="vr,gyroscope,accelerometer,fullscreen"\n      scrolling="no" allowfullscreen="true" style="max-width: 100%;" \n      src="https://kuula.co/share/${data.id}?fs=1&vr=1&iosfs=1&thumbs=1&hideinst=1&chromeless=1&logo=-1"></iframe><div class="iw-title"><p>${data.title}</p></div></div></div>`},markerFilm:function(data){return`<div id="iw-container"><div class="iw-content"><iframe width="560" height="315" src="https://www.youtube.com/embed/${data.id}?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><div class="iw-title"><p>${data.title}</p></div></div></div>`},markerSpill:function(data){return`<div id="iw-container"><div class="iw-content"><iframe width="560" height="350"\n      src="${data.id}" style="border:0"></iframe><div class="iw-title"><p>${data.title}</p></div></div></div>`}},infoWindow=new google.maps.InfoWindow;features.forEach(function(feature){var marker=new google.maps.Marker({position:new google.maps.LatLng(feature.lat,feature.lng),icon:{url:"/img/"+icons[feature.type],scaledSize:new google.maps.Size(35,35)},map:map});marker.addListener("click",function(){var template,content=(0,templates[feature.type])(feature.data);infoWindow.setContent(content),infoWindow.open(map,marker)})}),google.maps.event.addListener(infoWindow,"domready",function(){var iwOuter=$(".gm-style-iw"),iwBackground=iwOuter.prev();iwBackground.children(":nth-child(2)").css({display:"none"}),iwBackground.children(":nth-child(4)").css({display:"none"}),iwBackground.children(":nth-child(3)").find("div").children().css({"box-shadow":"none","z-index":"1",background:"#45C9B7"});var iwCloseBtn=iwOuter.next();iwCloseBtn.css({opacity:"1",right:"8px",top:"5px",width:"23px",height:"23px","background-image":"url(../img/x.svg)",border:"5px solid #45C9B7","border-radius":"50%","box-shadow":"0 0 5px black","background-color":"#45C9B7",overflow:"hidden"}),$(".iw-content").height()<140&&$(".iw-bottom-gradient").css({display:"none"}),iwCloseBtn.mouseout(function(){$(this).css({opacity:"1"})})})}function MimOverlay(bounds,image,map){this.bounds_=bounds,this.image_=image,this.map_=map,this.div_=null,this.setMap(map)}MimOverlay.prototype=new google.maps.OverlayView,MimOverlay.prototype.onAdd=function(){var div=document.createElement("div");div.style.borderStyle="none",div.style.borderWidth="0px",div.style.position="absolute";var img=document.createElement("img"),panes;img.src=this.image_,img.style.width="100%",img.style.height="100%",img.style.position="absolute",div.appendChild(img),this.div_=div,this.getPanes().overlayLayer.appendChild(div)},MimOverlay.prototype.draw=function(){var overlayProjection=this.getProjection(),sw=overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest()),ne=overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast()),div=this.div_;div.style.left=sw.x+"px",div.style.top=ne.y+"px",div.style.width=ne.x-sw.x+"px",div.style.height=sw.y-ne.y+"px"},MimOverlay.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},MimOverlay.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")},MimOverlay.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")},MimOverlay.prototype.toggle=function(){this.div_&&("hidden"===this.div_.style.visibility?this.show():this.hide())},initMap();