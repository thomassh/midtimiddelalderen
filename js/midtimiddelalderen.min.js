var overlay,map;function initMap(){var center,options={center:{lat:59.905,lng:10.7645},zoom:17,mapTypeId:"satellite",rotateControl:!1,tilt:0,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},mapTypeControl:!1,fullscreenControl:!0,gestureHandling:"greedy"};map=new google.maps.Map(document.getElementById("map"),options);var bounds=new google.maps.LatLngBounds(new google.maps.LatLng(59.902597,10.76097),new google.maps.LatLng(59.90722,10.76979)),srcImage;overlay=new MimOverlay(bounds,"../img/mimkart3.svg",map);var icons={marker3d:"3d-punkt.svg",marker360:"3d-punkt.svg",markerFoto:"3d-punkt.svg",markerFilm:"film-punkt.svg",markerSpill:"spill-punkt.svg"},features,templates={marker3d:function(data){return`<div class="info-window-container"><div class="sketchfab-embed-wrapper"><iframe width="380" height="280" \n      src="https://sketchfab.com/models/${data.id}/embed?annotation_cycle=8" frameborder="0" \n      allowvr allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" \n      onmousewheel=""></iframe><div class="iw-title"><p>${data.title}</p></div></div>`},markerFoto:function(data){return`<div class="info-window-container"><img src="../img/${data.id}" width="380" height="auto"></img><div class="iw-title"><p>${data.title}</p></div></div>`},marker360:function(data){return`<div class="info-window-container"><iframe width="380" height="280"\n      style="width: 380px; height: 280px; border: none;" frameborder="0" allow="vr,gyroscope,accelerometer,fullscreen"\n      scrolling="no" allowfullscreen="true" style="max-width: 100%;" \n      src="https://kuula.co/share/${data.id}?fs=1&vr=1&iosfs=1&thumbs=1&hideinst=1&chromeless=1&logo=-1"></iframe><div class="iw-title"><p>${data.title}</p></div></div>`},markerFilm:function(data){return`<iframe width="560" height="315" src="https://www.youtube.com/embed/${data.id}?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><div class="iw-title"><p>${data.title}</p></div>`},markerSpill:function(data){return`<iframe width="560" height="350"\n      src="${data.id}" style="border:0"></iframe><div class="iw-title"><p>${data.title}</p></div>`}};[{lat:59.903495,lng:10.76147,type:"marker360",data:{id:"7P2V5",title:"Inne i Mariakirken"},label:"360º: Mariakirken"},{lat:59.90362,lng:10.76216,type:"marker3d",data:{id:"cb86c7b100834cfcbeef0d151ef619a6",title:"Mariakirken"},label:"3D: Mariakirken"},{lat:59.90569,lng:10.762486,type:"marker3d",data:{id:"429605d3354343e391bc11aac896c589",title:"Sjøboder og brygge"},label:"3D: Sjøboder"},{lat:59.904232,lng:10.761228,type:"marker3d",data:{id:"a4eb2e9ab5754fc3a4e4cf9fd63edf40",title:"Middelalderbåt"},label:"3D: Middelalderbåt"},{lat:59.906032,lng:10.767468,type:"marker3d",data:{id:"f956368d3acb4600b7a04d0596ad8ac7",title:"Ladegårdens kjeller"},label:"3D: Kjeller"},{lat:59.9065,lng:10.76899,type:"marker3d",data:{id:"264a0df6f9f7412a8945b7a183436175",title:"Olavsklosteret"},label:"3D: Olavsklosteret"},{lat:59.906032,lng:10.764468,type:"marker3d",data:{id:"1ab638b32bc54e8ba3120a6abb24d5f4",title:"Fjøs"},label:"3D: Fjøs"},{lat:59.906032,lng:10.765768,type:"marker3d",data:{id:"7cfac08ef4db4a4e8ff725856d0699d1",title:"Bispeallmenningen"},label:"3D: Gateparti"},{lat:59.905332,lng:10.7655,type:"markerFoto",data:{id:"jernbanemuseet_sørenga.png",title:"Fra utgravningen av jernbanen"},label:"Foto: Utgravninger"},{lat:59.904032,lng:10.7636,type:"markerFoto",data:{id:"jernbanemuseet_damplokomotiv.png",title:"Damplokomotiv"},label:"Foto: Damplokomotiv"}].forEach(function(feature){var marker=new MarkerWithLabel({position:new google.maps.LatLng(feature.lat,feature.lng),icon:{url:"/img/"+icons[feature.type],scaledSize:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,50)},labelContent:""+[feature.label],labelAnchor:new google.maps.Point(55,68),labelClass:"custom-label",labelInBackground:!0,map:map,animation:google.maps.Animation.DROP}),infoWindow=null,closeDelayed=!1,closeDelayHandler=function(){$(infoWindow.getWrapper()).removeClass("active"),setTimeout(function(){closeDelayed=!0,infoWindow.close()},300)},infoWindow=new SnazzyInfoWindow({marker:marker,wrapperClass:"custom-window",closeWhenOthersOpen:"true",offset:{top:"-60px"},edgeOffset:{top:50,right:60,bottom:50},border:!1,closeButtonMarkup:'<button type="button" class="custom-close"></button>',callbacks:{open:function(){$(this.getWrapper()).addClass("open")},afterOpen:function(){var wrapper=$(this.getWrapper());wrapper.addClass("active"),wrapper.find(".custom-close").on("click",closeDelayHandler)},beforeClose:function(){return!!closeDelayed||(closeDelayHandler(),!1)},afterClose:function(){var wrapper=$(this.getWrapper());wrapper.find(".custom-close").off(),wrapper.removeClass("open"),closeDelayed=!1}}});marker.addListener("click",function(){var template,content=(0,templates[feature.type])(feature.data);infoWindow.setContent(content),infoWindow.open(map,marker)})})}function MimOverlay(bounds,image,map){this.bounds_=bounds,this.image_=image,this.map_=map,this.div_=null,this.setMap(map)}MimOverlay.prototype=new google.maps.OverlayView,MimOverlay.prototype.onAdd=function(){var div=document.createElement("div");div.style.borderStyle="none",div.style.borderWidth="0px",div.style.position="absolute";var img=document.createElement("img"),panes;img.src=this.image_,img.style.width="100%",img.style.height="100%",img.style.position="absolute",div.appendChild(img),this.div_=div,this.getPanes().overlayLayer.appendChild(div)},MimOverlay.prototype.draw=function(){var overlayProjection=this.getProjection(),sw=overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest()),ne=overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast()),div=this.div_;div.style.left=sw.x+"px",div.style.top=ne.y+"px",div.style.width=ne.x-sw.x+"px",div.style.height=sw.y-ne.y+"px"},MimOverlay.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},MimOverlay.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")},MimOverlay.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")},MimOverlay.prototype.toggle=function(){this.div_&&("hidden"===this.div_.style.visibility?this.show():this.hide())};